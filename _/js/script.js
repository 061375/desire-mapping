var clickMap={send_t:0,send_tmax:100,events:[],method:"",x:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var a,b=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],c=0;c<b.length;c++)try{a=new ActiveXObject(b[c]);break}catch(d){}return a},send:function(a,b,c,d,e){void 0===e&&(e=!0);var f=clickMap.x();f.open(c,a,e),f.onreadystatechange=function(){4==f.readyState&&b(f.responseText)},"POST"==c&&f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(d)},get:function(a,b,c,d){var e=[];for(var f in b)e.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]));clickMap.send(a+(e.length?"?"+e.join("&"):""),c,"GET",null,d)},post:function(a,b,c,d){var e=[];for(var f in b)e.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]));clickMap.send(a,c,"POST",e.join("&"),d)},init:function(a){if(this.url="undefined"!=typeof a.url?a.url:"",this.wordpress="undefined"!=typeof a.wordpress?a.wordpress:!1,this.method="undefined"!=typeof a.method?a.method:!1,this.send_tmax="undefined"!=typeof a.max?a.max:100,clickMap.wordpress)var b={action:"droplet_wp_ajax",method:clickMap.method+"_width",data:JSON.stringify({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})};else var b=JSON.stringify({width:window.screen.availWidth,height:window.screen.availHeight});clickMap.post(clickMap.url+"?m=width",b,function(){}),window.addEventListener("mousemove",function(a){clickMap.send_t++;var b={x:a.clientX,y:a.clientY};if(clickMap.events.push(JSON.stringify(b)),clickMap.wordpress)var c={action:"droplet_wp_ajax",method:clickMap.method+"_move",data:clickMap.events};else var c=clickMap.events;clickMap.send_t>clickMap.send_tmax&&(clickMap.send_t=0,clickMap.post(clickMap.url+"?m=move",c,function(){}))}),window.addEventListener("click",function(a){var b={x:a.clientX,y:a.clientY,tag:a.target.tagName,"class":a.target.getAttribute("class"),id:a.target.getAttribute("id"),href:a.target.getAttribute("href"),src:a.target.getAttribute("src")};if(clickMap.wordpress)var c={action:"droplet_wp_ajax",method:clickMap.method+"_click",data:JSON.stringify(b)};else var c=JSON.stringify(b);clickMap.post(clickMap.url+"?m=click",c,function(){})})}};