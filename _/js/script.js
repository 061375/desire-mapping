var clipMap={sent_t:0,events:[],method:"",x:function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;for(var a,b=["MSXML2.XmlHttp.6.0","MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"],c=0;c<b.length;c++)try{a=new ActiveXObject(b[c]);break}catch(d){}return a},send:function(a,b,c,d,e){void 0===e&&(e=!0);var f=clipMap.x();f.open(c,a,e),f.onreadystatechange=function(){4==f.readyState&&b(f.responseText)},"POST"==c&&f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(d)},get:function(a,b,c,d){var e=[];for(var f in b)e.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]));clipMap.send(a+(e.length?"?"+e.join("&"):""),c,"GET",null,d)},post:function(a,b,c,d){var e=[];for(var f in b)e.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]));clipMap.send(a,c,"POST",e.join("&"),d)},init:function(a){this.url="undefined"!=typeof a.url?a.url:"",this.wordpress="undefined"!=typeof a.wordpress?a.wordpress:!1,this.method="undefined"!=typeof a.method?a.method:!1,window.addEventListener("mousemove",function(a){clipMap.send_t++;var b={x:a.clientX,y:a.clientY};if(clipMap.events.push(JSON.stringify(b)),clipMap.wordpress)var c={action:"droplet_wp_ajax",method:clipMap.method,data:clipMap.events};else var c=clipMap.events;clipMap.send_t>100&&(clipMap.send_t=0,clipMap.post(clipMap.url,c,function(){}))}),window.addEventListener("click",function(a){var b={x:a.clientX,y:a.clientY,tag:a.target.tagName,"class":a.target.getAttribute("class"),id:a.target.getAttribute("id"),href:a.target.getAttribute("href"),src:a.target.getAttribute("src")};if(clipMap.wordpress)var c={action:"droplet_wp_ajax",method:clipMap.method,data:JSON.stringify(b)};else var c=JSON.stringify(b);clipMap.post(clipMap.url,c,function(){})})}};